<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">

    <!-- D3/jquery/bootstrap -->
    <script src="https://d3js.org/d3.v5.min.js"
            integrity="sha384-M06Cb6r/Yrkprjr7ngOrJlzgekrkkdmGZDES/SUnkUpUol0/qjsaQWQfLzq0mcfg"
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <!-- Common Functionalities Shared Among Pages -->
    <script src="js/common.js"></script>

    <title>Persistent Homology Makes Force-Directed Layouts Better</title>

    </head>
    <body>


<script>insert_navbar("h1_figures.html");</script>

    <div class="page">
        <h1>H1 Application Figures</h1>

        <h3>Dataset</h3>
        <select id="dataset_selector" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" style="width: 400px" onchange="load_dataset()"></select>

        <div id="prior_methods" style="width: 2250px;  margin-top: 30px; margin-bottom: 20px;"></div>
        <div id="our_method" style="width: 2250px;  height: 1475px; margin-top: 30px; margin-bottom: 20px;"></div>
    </div>


<script>

    Object.keys(exp_loop).forEach( _ds => {
        if(exp_loop[_ds] === -1 || exp_loop[_ds].length===0) return
        let ds = _ds.substring(5,_ds.length-5)
        let opt = document.createElement("option")
        opt.value = _ds
        opt.innerText = ds
        document.getElementById("dataset_selector").appendChild(opt)
    })

    function load_dataset() {
        let _ds = document.getElementById("dataset_selector").value
        let ds = _ds.substring(5,_ds.length-5)

        let before = "", label = "", statsDiv = ""

        before += '<span style="display: inline-block; width: 380px; text-align: right">'
        before += '<img width=325 src="figures/init_layout_' + ds + '_random_final.png"/>'
        before += '</span>'
        before += '<span style="display: inline-block; width: 380px; text-align: right">'
        before += '<img width=325 src="figures/h0_' + ds + '.png"/>'
        before += '</span>'
        statsDiv += '<span id="statsBefore" style="display: inline-block; width: 380px; text-align: center; font-size: 12px; padding-left: 55px"></span>'
        statsDiv += '<span id="statsh0" style="display: inline-block; width: 380px; text-align: center; font-size: 12px; padding-left: 55px"></span>'
        label += '<span style="width: 380px; text-align: center; float: left; padding-left: 55px">Random Layout Only</span>'
        label += '<span style="width: 380px; text-align: center; float: left; padding-left: 55px">Random After <u>H0 Force</u></span>'

        document.getElementById("prior_methods").innerHTML = label + "<br>" + before + "<div>" + statsDiv + "</div>"

        d3.csv("figures/init_layout_" + ds + '_random.csv').then(__data => {
            let output = '<b>Performance</b><br>'
            stat_fields.forEach( s => {
                output += stat_names[s] + ": " + parseFloat(__data[299][s]).toFixed(3) + "<br>"
            })
            document.getElementById('statsBefore').innerHTML = output
        })

        d3.csv("figures/h0_" + ds + '.csv').then(__data => {
            let output = '<b>Performance</b><br>'
            stat_fields.forEach( s => {
                output += stat_names[s] + ": " + parseFloat(__data[0][s]).toFixed(3) + "<br>"
            })
            document.getElementById('statsh0').innerHTML = output
        })

        let img1 = "", img2 = "", label1 = "", label2 = "", h1StatsDiv = ""

        exp_loop[_ds].forEach( loop_ip => {
            img1 += '<span style="display: inline-block; width: 380px; text-align: right">'
            img1 += '<img width=55 src="figures/h1_' + ds + "_" + loop_ip + '_force_barcode.png"/>'
            img1 += '<img width=325 src="figures/h1_' + ds + "_" + loop_ip + '_loop_graph.png"/></span>'
            img1 += '</span>'
            img2 += '<span style="display: inline-block; width: 380px; text-align: right">'
            img2 += '<img width=325 src="figures/h1_' + ds + "_" + loop_ip + '_force_graph.png"/>'
            img2 += '</span>'
            h1StatsDiv += '<span id="stats'+ loop_ip + '" style="display: inline-block; width: 380px; text-align: center; font-size: 12px; padding-left: 40px"></span>'
            label1 += '<span style="width: 380px; text-align: center; float: left;">Highlighted H1 Feature</span>'
            label2 += '<span style="width: 380px; text-align: center; float: left;">Random After <u>H1 Force</u></span>'
        })

        document.getElementById("our_method").innerHTML = label1 + "<br>" + img1 + "<br>" + label2 + "<br>" + img2 + "<div>" + h1StatsDiv + "</div>"

        exp_loop[_ds].forEach( loop_ip => {
            d3.csv("figures/h1_" + ds + '_' + loop_ip + '_force.csv').then(__data => {
                let output = '<b>Performance</b><br>'
                stat_fields.forEach( s => {
                    output += stat_names[s] + ": " + parseFloat(__data[0][s]).toFixed(3) + "<br>"
                })
                document.getElementById('stats'+loop_ip).innerHTML = output
            })
        })
    }

    load_dataset()

</script>

</body>

</html>
